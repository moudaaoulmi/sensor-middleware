<!--
The assistant agent.
<br>
The agent assists the patient by letting the air conditioning agent know about the current 
	desired temperature.

-->
<agent xmlns="http://jadex.sourceforge.net/jadex"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jadex.sourceforge.net/jadex 
	                    http://jadex.sourceforge.net/jadex-0.96.xsd"
	name="Assistant" package="com.andrzejborowczyk.bdihospitalization">
	
	<imports>
		<import>jadex.adapter.fipa.*</import>
		<import>jadex.runtime.*</import>
		<import>jadex.planlib.*</import>
		<import>jadex.util.*</import>
		<import>jadex.*</import>
		<import>java.util.logging.*</import>
	</imports>
	
	<capabilities>
		<capability name="dfcap" file="jadex.planlib.DF"/>
	</capabilities>
	
	<beliefs>
		
		<belief name="temperature_desire" class="TemperatureDesire">
			<fact>new TemperatureDesire(10)</fact>
		</belief>
		
		<belief name="target_temperature" class="int" updaterate="5000">
			<fact>$beliefbase.temperature_desire.getTemperature()</fact>
		</belief>
		
		<!-- the connection to the air conditioning agent -->	
		<belief name="airconditioning" class="AgentIdentifier"/>
	</beliefs>
	
	<goals>
		<achievegoalref name="df_search">
			<concrete ref="dfcap.df_search"/>
		</achievegoalref>
	</goals>
	
	<plans>
		<plan name="temperature_desire">
			<body>new TemperatureDesirePlan()</body>
			<trigger>
				<beliefchange ref="target_temperature"></beliefchange>
			</trigger>
		</plan>
		<plan name="gui">
			<body>new TemperatureDesireGUIPlan()</body>		
		</plan>

	</plans>
	
	<events>	
		<internalevent name="gui_update">
			<parameter name="content" class="String[]"/>
		</internalevent>	
	
		<!-- Sends and performative inform about a temperature desire -->
		<messageevent name="inform_temperature_desire" direction="send" type="fipa">
			<parameter name="performative" class="String">
				<value>SFipa.INFORM</value>
			</parameter>
			<parameter name="conversation-id" class="String">
				<value>SFipa.createUniqueId($scope.getAgentName())</value>
			</parameter>
			<parameter name="language" class="String">
				<value>SFipa.JAVA_XML</value>
			</parameter>
		</messageevent>
			
	</events>
	
	<properties>
		<!-- Speficifies the service description an Injection Agent can provide -->
		<property name="service_airconditioning"> SFipa.createAgentDescription(null,
			SFipa.createServiceDescription(null, "service_airconditioning", null))
		</property>
	</properties>

		<configurations>
		<configuration name="default">
			<plans>
				<initialplan ref="gui"/>
			</plans>
		</configuration>
	</configurations>	
	
</agent>